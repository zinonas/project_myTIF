{% extends "base.html" %}

{% load crispy_forms_tags %}
{% load bootstrap3 %}
{% load static %}
{% load staticfiles %}
{# Load CSS and JavaScript #}
{% bootstrap_css %}
{% bootstrap_javascript %}

{% block pagetitle %}Results{% endblock %}

{% block head %}

            <!--<link rel="stylesheet" type="text/css" href="{% static 'admin/css/global.css' %}"/>-->

            <!--<script type="text/javascript" src="/admin/jsi18n/"></script>-->
            <!--<script type="text/javascript" src="{% static 'admin/js/core.js' %}"></script>-->
            <!--<script type="text/javascript" src="{% static 'admin/js/admin/RelatedObjectLookups.js' %}"></script>-->
            <!--<script type="text/javascript" src="{% static 'admin/js/jquery.js' %}"></script>-->
            <!--<script type="text/javascript" src="{% static 'admin/js/jquery.init.js' %}"></script>-->
            <!--<script type="text/javascript" src="{% static 'admin/js/actions.js' %}"></script>-->
            <!--<script type="text/javascript" src="{% static 'admin/js/calendar.js' %}"></script>-->
            <!--<script type="text/javascript" src="/static/admin/js/admin/DateTimeShortcuts.js"></script>-->
            <!--<script src="//code.jquery.com/jquery-1.10.2.js"></script>-->
            <!--<script>
                $(document).ready(function() {
                    $('#my_option').each(function() {
                        var option = $(this).val();

                        if (option === '1'){
                            $('#mytab a[href="#3"]').parent().removeClass("hide");
//                            alert(option);
                        }
                        if (option === '2'){
                            $('#mytab a[href="#4"]').parent().removeClass("hide");
//                            alert(option);
                        }
                        if (option === '3'){
                            $('#mytab a[href="#5"]').parent().removeClass("hide");
//                            alert(option);
                        }
                        if (option === '4'){
                            $('#mytab a[href="#6"]').parent().removeClass("hide");
//                            alert(option);
                        }
                        if (option === '12'){
                            $('#mytab a[href="#3"]').parent().removeClass("hide");
                            $('#mytab a[href="#4"]').parent().removeClass("hide");
//                            alert(option);
                        }
                        if (option === '13'){
                            $('#mytab a[href="#3"]').parent().removeClass("hide");
                            $('#mytab a[href="#5"]').parent().removeClass("hide");
//                            alert(option);
                        }
                        if (option === '14'){
                            $('#mytab a[href="#3"]').parent().removeClass("hide");
                            $('#mytab a[href="#6"]').parent().removeClass("hide");
//                            alert(option);
                        }
                        if (option === '23'){
                            $('#mytab a[href="#4"]').parent().removeClass("hide");
                            $('#mytab a[href="#5"]').parent().removeClass("hide");
//                            alert(option);
                        }
                        if (option === '24'){
                            $('#mytab a[href="#4"]').parent().removeClass("hide");
                            $('#mytab a[href="#6"]').parent().removeClass("hide");
//                            alert(option);
                        }
                        if (option === '34'){
                            $('#mytab a[href="#5"]').parent().removeClass("hide");
                            $('#mytab a[href="#6"]').parent().removeClass("hide");
//                            alert(option);
                        }
                    });
                });
            </script>-->

            <script>
                $(document).ready(function() {
                     var allcheckedValues = $('input:checkbox:checked').map(function() {
                        return this.value;
                        }).get();
                        //alert(allcheckedValues)

                        if (allcheckedValues.indexOf('b-thalassaemia syndromes') >= 0 | allcheckedValues.indexOf('a-thalassaemia syndromes') >= 0 | allcheckedValues.indexOf('Other haemoglobin variants') >= 0 | allcheckedValues.indexOf('Sickle cell syndromes') >= 0 ) {
                            $('#mytab a[href="#3"]').parent().removeClass("hide");
                        }
                       if (allcheckedValues.indexOf('Rare cell enzyme disorders') >= 0) {
                            $('#mytab a[href="#4"]').parent().removeClass("hide");
                        }
                       if (allcheckedValues.indexOf('Rare cell membrane disorders') >= 0) {
                            $('#mytab a[href="#5"]').parent().removeClass("hide");
                        }
                       if (allcheckedValues.indexOf('Congenital dyserythropoietic anaemias') >= 0) {
                            $('#mytab a[href="#6"]').parent().removeClass("hide");
                        }

                    $('input:checkbox').change(function () {
                        var value = String($(this).val())
                        var after = value.split(",").join(", ")

                        var uncheckedValues = $('input:checkbox:not(:checked)').map(function() {
                        return this.value;
                        }).get();

                        var checkedValues = $('input:checkbox:checked').map(function() {
                        return this.value;
                        }).get();
                        //alert(checkedValues)

                        //alert(after)
                        if (value == 'b-thalassaemia syndromes' | value == 'a-thalassaemia syndromes' | value=='Other haemoglobin variants' | value=='Sickle cell syndromes' ){
                            $('#mytab a[href="#3"]').parent().removeClass("hide");
                            $('#mytab a[href="#4"]').parent().addClass("hide");
                            $('#mytab a[href="#5"]').parent().addClass("hide");
                            $('#mytab a[href="#6"]').parent().addClass("hide");
                        }



                       else if (value == 'Rare cell enzyme disorders'){
                            $('#mytab a[href="#3"]').parent().addClass("hide");
                            $('#mytab a[href="#4"]').parent().removeClass("hide");
                            $('#mytab a[href="#5"]').parent().addClass("hide");
                            $('#mytab a[href="#6"]').parent().addClass("hide");
                        }



                       else if (value == 'Rare cell membrane disorders'){
                            $('#mytab a[href="#3"]').parent().addClass("hide");
                            $('#mytab a[href="#4"]').parent().addClass("hide");
                            $('#mytab a[href="#5"]').parent().removeClass("hide");
                            $('#mytab a[href="#6"]').parent().addClass("hide");
                       }


                       else if (value == 'Congenital dyserythropoietic anaemias'){
                            $('#mytab a[href="#3"]').parent().addClass("hide");
                            $('#mytab a[href="#4"]').parent().addClass("hide");
                            $('#mytab a[href="#5"]').parent().addClass("hide");
                            $('#mytab a[href="#6"]').parent().removeClass("hide");
                       }

                       else if ((after.indexOf('b-thalassaemia syndromes') >= 0 | after.indexOf('a-thalassaemia syndromes') >= 0 | after.indexOf('Other haemoglobin variants') >= 0 | after.indexOf('Sickle cell syndromes') >= 0) && after.indexOf('Rare cell enzyme disorders') >= 0) {
                           //alert("here")
                           $('#mytab a[href="#3"]').parent().removeClass("hide");
                           $('#mytab a[href="#4"]').parent().removeClass("hide");
                           $('#mytab a[href="#5"]').parent().addeClass("hide");
                           $('#mytab a[href="#6"]').parent().addClass("hide");
                       }

                       else if ((after.indexOf('b-thalassaemia syndromes') >= 0 | after.indexOf('a-thalassaemia syndromes') >= 0 | after.indexOf('Other haemoglobin variants') >= 0 | after.indexOf('Sickle cell syndromes') >= 0) && after.indexOf('Rare cell membrane disorders') >= 0) {
                           //alert("here")
                           $('#mytab a[href="#3"]').parent().removeClass("hide");
                           $('#mytab a[href="#4"]').parent().addClass("hide");
                           $('#mytab a[href="#5"]').parent().removeClass("hide");
                           $('#mytab a[href="#6"]').parent().addClass("hide");
                       }

                       else if ((after.indexOf('b-thalassaemia syndromes') >= 0 | after.indexOf('a-thalassaemia syndromes') >= 0 | after.indexOf('Other haemoglobin variants') >= 0 | after.indexOf('Sickle cell syndromes') >= 0) && after.indexOf('Congenital dyserythropoietic anaemias') >= 0) {
                           //alert("here")
                           $('#mytab a[href="#3"]').parent().removeClass("hide");
                           $('#mytab a[href="#4"]').parent().addClass("hide");
                           $('#mytab a[href="#5"]').parent().addClass("hide");
                           $('#mytab a[href="#6"]').parent().removeClass("hide");
                       }

                       else if ( after.indexOf('Rare cell membrane disorders') >= 0 && after.indexOf('Rare cell enzyme disorders') >= 0) {
                           //alert("here")
                           $('#mytab a[href="#3"]').parent().addClass("hide");
                           $('#mytab a[href="#4"]').parent().removeClass("hide");
                           $('#mytab a[href="#5"]').parent().removeClass("hide");
                           $('#mytab a[href="#6"]').parent().addClass("hide");
                       }

                       else if ( after.indexOf('Rare cell membrane disorders') >= 0 && after.indexOf('Congenital dyserythropoietic anaemias') >= 0) {
                           //alert("here")
                           $('#mytab a[href="#3"]').parent().addClass("hide");
                           $('#mytab a[href="#4"]').parent().addClass("hide");
                           $('#mytab a[href="#5"]').parent().removeClass("hide");
                           $('#mytab a[href="#6"]').parent().removeClass("hide");
                       }

                       else if ( after.indexOf('Rare cell enzyme disorders') >= 0 && after.indexOf('Congenital dyserythropoietic anaemias') >= 0) {
                           //alert("here")
                           $('#mytab a[href="#3"]').parent().addClass("hide");
                           $('#mytab a[href="#4"]').parent().removeClass("hide");
                           $('#mytab a[href="#5"]').parent().addClass("hide");
                           $('#mytab a[href="#6"]').parent().removeClass("hide");
                       }

                       if (uncheckedValues.indexOf('b-thalassaemia syndromes') >= 0 && uncheckedValues.indexOf('a-thalassaemia syndromes') >= 0 && uncheckedValues.indexOf('Other haemoglobin variants') >= 0 && uncheckedValues.indexOf('Sickle cell syndromes') >= 0 ) {
                            $('#mytab a[href="#3"]').parent().addClass("hide");
                        }
                       if (uncheckedValues.indexOf('Rare cell enzyme disorders') >= 0) {
                            $('#mytab a[href="#4"]').parent().addClass("hide");
                        }
                       if (uncheckedValues.indexOf('Rare cell membrane disorders') >= 0) {
                            $('#mytab a[href="#5"]').parent().addClass("hide");
                        }
                       if (uncheckedValues.indexOf('Congenital dyserythropoietic anaemias') >= 0) {
                            $('#mytab a[href="#6"]').parent().addClass("hide");
                        }

                       if (checkedValues.indexOf('b-thalassaemia syndromes') >= 0 | checkedValues.indexOf('a-thalassaemia syndromes') >= 0 | checkedValues.indexOf('Other haemoglobin variants') >= 0 | checkedValues.indexOf('Sickle cell syndromes') >= 0 ) {
                            $('#mytab a[href="#3"]').parent().removeClass("hide");
                        }
                       if (checkedValues.indexOf('Rare cell enzyme disorders') >= 0) {
                            $('#mytab a[href="#4"]').parent().removeClass("hide");
                        }
                       if (checkedValues.indexOf('Rare cell membrane disorders') >= 0) {
                            $('#mytab a[href="#5"]').parent().removeClass("hide");
                        }
                       if (checkedValues.indexOf('Congenital dyserythropoietic anaemias') >= 0) {
                            $('#mytab a[href="#6"]').parent().removeClass("hide");
                        }

                    });
                });
            </script>
         <script>
                $(document).ready(function() {
                    $('#id_demo-data_entered_by_name').attr('disabled', true);
                    $('#id_demo-data_entered_by_relationship').attr('disabled', true);
                    $('#id_demo-data_entered_by').change(function () {
                        var value = $(this).val()
                        //alert(value)
                        if (value === 'Other'){
                            $('#id_demo-data_entered_by_name').attr('disabled', false);
                            $('#id_demo-data_entered_by_relationship').attr('disabled', false);
                        }
                        if (value != 'Other'){
                            $('#id_demo-data_entered_by_name').attr('disabled', true);
                            $('#id_demo-data_entered_by_relationship').attr('disabled', true);
                        }
                    });
                });
            </script>
            {{frm.media}}
{% endblock %}

{%block jumbotron_title %}Results and update{% endblock %}
{%block jumbotron_info %}Write here more details{% endblock %}
{% block content %}

<!-- Nav tabs -->
<!--<ul class="nav nav-tabs">-->
    <!--<li class="active"><a href="#demographics" role="tab" data-toggle="tab">Demographics</a></li>-->
    <!--<li><a href="#diagnosis" role="tab" data-toggle="tab">Diagnosis</a></li>-->
    <!--<li><a href="#a_b_sickle" role="tab" data-toggle="tab">A_b_sickle</a></li>-->
    <!--<li><a href="#settings" role="tab" data-toggle="tab">Settings</a></li>-->
<!--</ul>-->
<!--<div class="tab-content">-->

    <!-- Tab panes -->
<input type="hidden" id="my_option" name='diagnosis_option' value="{{diag_option}}" />

<form class="form-horizontal" method="post" id="input">
    {% csrf_token %}

    <div class="tab-pane" id="mytab">
        <ul class="nav nav-tabs">
            <li class="active">
                <a href="#1" data-toggle="tab">Demographics</a>
            </li>
            <li>
                <a href="#2" data-toggle="tab">Diagnosis</a>
            </li>
            <li class="hide">
                <a href="#3" data-toggle="tab">Haemoglobin disorders diagnostic tests</a>
            </li>
            <li class="hide">
                <a href="#4" data-toggle="tab">Red cell enzyme disorders</a>
            </li>
            <li class="hide">
                <a href="#5" data-toggle="tab">Red cell membrane disorders</a>
            </li>
            <li class="hide">
                <a href="#6" data-toggle="tab">Congenital desyrythropoietic anaemias</a>
            </li>
            <li class="hide">
                <a href="#7" data-toggle="tab">Summary of Thalassaemia and Severe Anaemias</a>
            </li>
            <li class="hide">
                <a href="#8" data-toggle="tab">Summary of Sickle Cell disease</a>
            </li>
            <li class="hide">
                <a href="#9" data-toggle="tab">Patient reported outcomes</a>
            </li>
        </ul>
        <div class="tab-content">
            <div class="tab-pane fade in active" id="1">
                <!--<input type="hidden" name="form_id" value="demographics">-->
                <div class="container"> {%crispy frm%}</div>

            </div>
            <div class="tab-pane fade" id="2">
                <!-- form controls to be continued here -->
                <!--<input type="hidden" name="form_id" value="diagnosis">-->
                <div class="container">{%crispy frm_d%}</div>
            </div>
            <div class="tab-pane" id="3">
                <!-- form controls to be continued here -->
                <!--<input type="hidden" name="form_id" value="a_b_s">-->
                <div class="container"> {%crispy frm_a_b_s%}</div>
            </div>
             <div class="tab-pane" id="4">
                <!-- form controls to be continued here -->
                <!--<input type="hidden" name="form_id" value="a_b_s">-->
                <div class="container"> {%crispy frm_rc_enz%}</div>
            </div>
            <div class="tab-pane" id="5">
                <!-- form controls to be continued here -->
                <!--<input type="hidden" name="form_id" value="a_b_s">-->
                <div class="container"> {%crispy frm_rc_mbr%}</div>
            </div>
            <div class="tab-pane" id="6">
                <!-- form controls to be continued here -->
                <!--<input type="hidden" name="form_id" value="a_b_s">-->
                <div class="container"> {%crispy frm_cong_dys%}</div>
            </div>
            <div class="tab-pane fade" id="7">
                <!-- form controls to be continued here -->
                <!--<input type="hidden" name="form_id" value="a_b_s">-->
                <div class="container"> {%crispy frm_cln_dt%}</div>
            </div>
            </div>
        </div>
    </div>
    <!--<input type="submit" name='submit' value="Submit">-->
</form>


{% endblock %}
