{% load crispy_forms_tags %}
{% load bootstrap3 %}
{% load static %}
{% load staticfiles %}
{# Load CSS and JavaScript #}
{% bootstrap_css %}
{% bootstrap_javascript %}


<html>
  <head>
    <title>Thalassaemia eRegistry - {%block pagetitle %}{% endblock %}</title>

    <!--<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">-->
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <style>
    body {
        padding-top: 60px;
    }
    .navbar-login
    {
        width: 305px;
        padding: 10px;
        padding-bottom: 0px;
    }

    .navbar-login-session
    {
        padding: 10px;
        padding-bottom: 0px;
        padding-top: 0px;
    }

    .icon-size
    {
        font-size: 87px;
    }
    </style>

   <script>function getCookie(name) {
      var value = "; " + document.cookie;
      var parts = value.split("; " + name + "=");
      if (parts.length == 2) return parts.pop().split(";").shift();
    }</script>


    <!--<script>
         $(document).ready(function() {

             //alert(window.location.href.toString().split(window.location.host)[1]);
//             alert(window.location.host.toString());
             if (window.location.href.toString().split(window.location.host)[1] === '/') {
//                 alert('input');
                 $('ul.nav.navbar-nav li:eq(0)').addClass('active');
                 $('ul.nav.navbar-nav li:eq(1)').removeClass('active');
                 $('ul.nav.navbar-nav li:eq(2)').removeClass('active');
                 $('ul.nav.navbar-nav li:eq(3)').removeClass('active');
                 $('ul.nav.navbar-nav li:eq(4)').removeClass('active');
                 $('ul.nav.navbar-nav li:eq(5)').removeClass('active');
                 $('ul.nav.navbar-nav li:eq(6)').removeClass('active');
             }

             if (window.location.href.toString().split(window.location.host)[1] === '/input/') {
//                 alert('input');
                 $('ul.nav.navbar-nav li:eq(0)').removeClass('active');
                 $('ul.nav.navbar-nav li:eq(1)').addClass('active');
                 $('ul.nav.navbar-nav li:eq(2)').removeClass('active');
                 $('ul.nav.navbar-nav li:eq(3)').removeClass('active');
                 $('ul.nav.navbar-nav li:eq(4)').removeClass('active');
                 $('ul.nav.navbar-nav li:eq(5)').removeClass('active');
                 $('ul.nav.navbar-nav li:eq(6)').removeClass('active');
             }

             if (window.location.href.toString().split(window.location.host)[1] === '/search/' | window.location.href.toString().split(window.location.host)[1].indexOf('/results/') > -1) {
//                 alert('input');
                 $('ul.nav.navbar-nav li:eq(0)').removeClass('active');
                 $('ul.nav.navbar-nav li:eq(1)').removeClass('active');
                 $('ul.nav.navbar-nav li:eq(2)').addClass('active');
                 $('ul.nav.navbar-nav li:eq(3)').removeClass('active');
                 $('ul.nav.navbar-nav li:eq(4)').removeClass('active');
                 $('ul.nav.navbar-nav li:eq(5)').removeClass('active');
                 $('ul.nav.navbar-nav li:eq(6)').removeClass('active');
             }

             if (window.location.href.toString().split(window.location.host)[1] === '/search_patient_card/' | window.location.href.toString().split(window.location.host)[1].indexOf('/results_patient_card/') > -1 ) {
//                 alert('input');
                 $('ul.nav.navbar-nav li:eq(0)').removeClass('active');
                 $('ul.nav.navbar-nav li:eq(1)').removeClass('active');
                 $('ul.nav.navbar-nav li:eq(2)').removeClass('active');
                 $('ul.nav.navbar-nav li:eq(3)').addClass('active');
                 $('ul.nav.navbar-nav li:eq(4)').removeClass('active');
                 $('ul.nav.navbar-nav li:eq(5)').removeClass('active');
                 $('ul.nav.navbar-nav li:eq(6)').removeClass('active');
             }

             if (window.location.href.toString().split(window.location.host)[1] === '/statistics/') {
//                 alert('input');
                 $('ul.nav.navbar-nav li:eq(0)').removeClass('active');
                 $('ul.nav.navbar-nav li:eq(1)').removeClass('active');
                 $('ul.nav.navbar-nav li:eq(2)').removeClass('active');
                 $('ul.nav.navbar-nav li:eq(3)').removeClass('active');
                 $('ul.nav.navbar-nav li:eq(4)').addClass('active');
                 $('ul.nav.navbar-nav li:eq(5)').removeClass('active');
                 $('ul.nav.navbar-nav li:eq(6)').removeClass('active');
             }

             if (window.location.href.toString().split(window.location.host)[1] === '/externalcenters/') {
//                 alert('input');
                 $('ul.nav.navbar-nav li:eq(0)').removeClass('active');
                 $('ul.nav.navbar-nav li:eq(1)').removeClass('active');
                 $('ul.nav.navbar-nav li:eq(2)').removeClass('active');
                 $('ul.nav.navbar-nav li:eq(3)').removeClass('active');
                 $('ul.nav.navbar-nav li:eq(4)').removeClass('active');
                 $('ul.nav.navbar-nav li:eq(5)').addClass('active');
                 $('ul.nav.navbar-nav li:eq(6)').removeClass('active');
             }

             if (window.location.href.toString().split(window.location.host)[1] === '/about/') {
//                 alert('input');
                 $('ul.nav.navbar-nav li:eq(0)').removeClass('active');
                 $('ul.nav.navbar-nav li:eq(1)').removeClass('active');
                 $('ul.nav.navbar-nav li:eq(2)').removeClass('active');
                 $('ul.nav.navbar-nav li:eq(3)').removeClass('active');
                 $('ul.nav.navbar-nav li:eq(4)').removeClass('active');
                 $('ul.nav.navbar-nav li:eq(5)').removeClass('active');
                 $('ul.nav.navbar-nav li:eq(6)').addClass('active');
             }

         })

    </script>-->
    <script>
                $(document).ready(function() {
                    var mod2 = getCookie('module_2');
                    var mod3 = getCookie('module_3');
                    var mod4 = getCookie('module_4');
                    var mod5 = getCookie('module_5');
                    var mod6 = getCookie('module_6');


                     if (mod2 ==2){
                         //$('#mytab a[href="#3"]').parent().removeClass("hide");
                         //$('#mytab a[href="#4"]').parent().removeClass("hide");
                         //$('#mytab a[href="#5"]').parent().removeClass("hide");
                         //$('#mytab a[href="#6"]').parent().removeClass("hide");
                         $('#mytab a[href="#7"]').parent().removeClass("hide")
                         $("input[name='module_id_2']").prop('checked', true)
                     }
                    if (mod3 ==3){
                         $('#mytab a[href="#8"]').parent().removeClass("hide");
                         $("input[name='module_id_3']").prop('checked', true)

                     }
                    if (mod4 ==4){
                         $('#mytab a[href="#9"]').parent().removeClass("hide");
                         $("input[name='module_id_4']").prop('checked', true)
                     }
                })
            </script>


    <!--<script src="jquery-1.11.1.min.js"></script>-->
    {% block head %}{% endblock %}
  </head>


  {% url 'home' as home_url %}
  {% url 'modules' as modules_url %}
  {% url 'input' as input_url %}
  {% url 'search' as search_url %}
  {% url 'results' as results_url %}
  {% url 'userManual' as userManual_url %}
  {% url 'patientConsent' as patientConsent_url %}
  {% url 'statistics' as statistics_url %}
  {% url 'extcenters' as extcenters_url %}
  {% url 'login_view' as login_url %}
  <body>
    <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
      <div class="container-fluid">
        <div class="navbar-header">
          <a class="navbar-brand" href="http://www.enerca.org" target=_blank><img src="/media/Enerca_logo.png" width="8%"/></a>
        </div>
        <div>

        <div class="header">
              <ul class="nav navbar-nav" role="navigation">
                {% if user.is_authenticated %}
                  {% for group in user.groups.all %}
                    {% if group.name != 'Patient' %}
                    <li {% if request.get_full_path == modules_url %} class="active" {% else%} class="inactive"{% endif %}><a href="{% url 'modules' %}"><b  style="color:#ff9904;">Modules</b></a></li>

                    {% endif %}
                  {%endfor%}
                  {% endif %}
                <li {% if request.get_full_path == home_url %} class="active"{% endif %}><a href="{% url 'home' %}">Home</a></li>

                {% if user.is_authenticated %}
                <!--<li class="dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="#">Page 1 <span class="caret"></span></a>-->

                    <!--<ul class="dropdown-menu">-->
                    <!--<li><a href="#">Page 1-1</a></li>-->
                    <!--<li><a href="#">Page 1-2</a></li>-->
                    <!--<li><a href="#">Page 1-3</a></li>-->
                  <!--</ul>-->

                <!--</li>-->
                {% for group in user.groups.all %}
                    {% if group.name == 'Doctor' or group.name == 'Nurse' %}
                        <li {% if request.get_full_path == input_url %} class="active"{% endif %}><a href="{% url 'input'  %}">Add patient</a></li>
                    {% endif %}
                    {% if group.name == 'Doctor' or group.name == 'Nurse' %}
                        <li {% if request.get_full_path == search_url %} class="active"{% endif %}><a href="{% url 'search'  %}">Search patient</a></li>
                    {% endif %}

                {%endfor%}

                {% if request.COOKIES.module_6 %}
                    <li {% if request.get_full_path == extcenters_url %} class="active"{% endif %}><a href="{% url 'extcenters'  %}">Aggregated data</a></li>
                {%endif%}
                {% if request.COOKIES.module_5 %}
                    <li {% if request.get_full_path == statistics_url %} class="active"{% endif %}><a href="{% url 'statistics'  %}">Analytics</a></li>
                {%endif%}
                {%endif%}

                <li{% if request.get_full_path == userManual_url %} class="active"{% endif %}><a href="{% url 'userManual'  %}" target="_blank">User Manual</a></li>
              </ul>
          </div>
          <ul class="nav navbar-nav navbar-right" role="navigation">
            {% if user.is_authenticated %}
            <li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown">
                        <span class="glyphicon glyphicon-user"></span>Â 
                        <strong>{{user.username}} </strong>
                        <span class="glyphicon glyphicon-chevron-down"></span>
                    </a>
                    <ul class="dropdown-menu">
                        <li>
                            <div class="navbar-login">
                                <div class="row">
                                    <div class="col-lg-4">
                                        <p class="text-center">
                                            <span class="glyphicon glyphicon-user icon-size"></span>
                                        </p>
                                    </div>
                                    <div class="col-lg-8">
                                        <p class="text-left"><strong>{{user.first_name}} {{user.last_name}}</strong></p>
                                        <p class="text-left small">{{user.email}}</p>
                                        <p class="text-left">
                                            <a href="{% url 'password_change' %}" class="btn btn-warning btn-block btn-sm">Change Password</a>
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <div class="navbar-login navbar-login-session">
                                <div class="row">
                                    <div class="col-lg-12">
                                        <p class="text-left small">
                                            <a href="{% url 'modules' %}" class="btn btn-primary btn-block btn-sm">Select module(s)</a>
                                        </p>
                                        <p class="text-left small">Last login: {{user.last_login}}</p>
                                    </div>
                                </div>
                            </div>
                        </li>
                    </ul>{%endif%}
            </li>
            <li>{% if user.is_authenticated %}
                <a href="{% url 'logout_view'  %}"><span class="glyphicon glyphicon-log-out"></span> Logout</a>
                {% else %}
                <a href="{% url 'login_view'  %}"><span class="glyphicon glyphicon-log-in"></span> Login</a>
                {% endif %}
            </li>
          </ul>
        </div>
      </div>
    </nav>
    {% if request.get_full_path != login_url %}
    <div class="container">
        <div class="jumbotron">
            <h1>{%block jumbotron_title %}{% endblock %}</h1>
            <p>{%block jumbotron_info %}{% endblock %}</p>
        </div>
    <!--</div>-->
    <!--<div class="container">-->
        </div>
    {% endif %}
    <div class="container">
        <div class="jumbotron">
            {%block content%}{%endblock%}
        </div>
    </div>

    <footer>{% block footer %}{% endblock %}</footer>

  </body>

<script type="text/javascript" src="{% static 'admin/js/core.js' %}"></script>
<script type="text/javascript" src="{% static 'admin/js/admin/RelatedObjectLookups.js' %}"></script>
<script type="text/javascript" src="{% static 'admin/js/jquery.js' %}"></script>
<script type="text/javascript" src="{% static 'admin/js/jquery.init.js' %}"></script>
<script type="text/javascript" src="{% static 'admin/js/actions.js' %}"></script>
<script type="text/javascript" src="{% static 'admin/js/calendar.js' %}"></script>
<script type="text/javascript" src="{% static 'admin/js/admin/DateTimeShortcuts.js'  %}" ></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/3.0.0/js/bootstrap-datetimepicker.min.js"></script>
</html>